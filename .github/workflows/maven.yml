# This workflow will build a Java project with Maven, and cache/restore any dependencies to improve the workflow execution time
# For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-java-with-maven

# This workflow uses actions that are not certified by GitHub.
# They are provided by a third-party and are governed by
# separate terms of service, privacy policy, and support
# documentation.

name: Java CI with Maven

on:
  push:
    branches: ["*"]
  pull_request:
    branches: [ "main" ]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
    - name: Set up JDK 17
      uses: actions/setup-java@v4
      with:
        java-version: '17'
        distribution: 'temurin'
        cache: maven

It’s important to ensure that your GitHub Actions workflow mirrors the commands you run locally. Given your local commands, let's verify how you should structure your GitHub Actions workflow to match them.

Local Commands Recap
You are running:

cd ./core and mvn clean package
cd ../asmetal2java_codegen and mvn clean package
These commands build the core module first, and then build the asmetal2java_codegen module. Here's how you can structure your GitHub Actions workflow to replicate this:

GitHub Actions Workflow
Here’s a sample GitHub Actions workflow that mirrors your local build steps:

yaml
Copy code
name: Java CI with Maven

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest  # Specify the runner OS

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Set up JDK 17
      uses: actions/setup-java@v4
      with:
        java-version: '17'
        distribution: 'temurin'
        cache: maven

    - name: Build core module
      run: |
        cd core
        mvn clean package  # Build the core module

    - name: Build asmetal2java_codegen module
      run: |
        cd ../asmetal2java_codegen
        mvn clean package  # Build the asmetal2java_codegen module

    # Optional: Uploads the full dependency graph to GitHub to improve the quality of Dependabot alerts this repository can receive
    #- name: Update dependency graph
    #  uses: advanced-security/maven-dependency-submission-action@571e99aab1055c2e71a1e2309b9691de18d6b7d6
